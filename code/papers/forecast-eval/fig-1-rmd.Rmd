---
title: "Paper figures and statistics"
author: "K Sherratt"
date: "27/08/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
library(here)
source(here("code", "papers", "forecast-eval", "R", "get-eval.R"))
```



```{r relative-ae}
source(here(file_path, "R", "model-relative-ae.R"))
```

# Results
---

```{r relative-ae-figure-1, fig.height=9, fig.width=6}
plot(rae_plot)
```

Average of scaled relative absolute error in forecasts of one and two week ahead incident cases and deaths, by model. The vertical dashed line represents the baseline to which scores are scaled. The score is the absolute error, the difference between the median forecast prediction and the observed value for each forecasting week; this was scaled against the score of a simple baseline forecast and averaged over the number of weeks the model forecast for each target country. Single points indicate model forecasts for a single location, boxplots indicate the distribution of model performance where models forecast across locations. Total combinations of model, location, target, and horizon pairs N = `r rae_n_pairs_cases + rae_n_pairs_deaths` (of which `r round(rae_n_pairs_cases / (rae_n_pairs_cases + rae_n_pairs_deaths) * 100)`% are case targets); to maintain scale, this figure excludes outliers with relative AE greater than 3 (n = `r rae_n_outliers`).

---

```{r relative-ae-figure-2, fig.height=9, fig.width=6}
plot(top_models)
```
Models by percentage of forecast targets where each was the top ranked model. Forecast targets include 128 combinations of cases/deaths, one and two week ahead horizons, and 32 hub locations.

---


